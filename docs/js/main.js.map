{"version":3,"file":"main.js","sources":["js/utilities.js","js/view.js","js/intro/intro-view.js","js/intro/intro.js","js/greeting/greeting-view.js","js/greeting/greeting.js","js/templates/header.js","js/rules/rules-view.js","js/rules/rules.js","js/game/game-view.js","js/game/game-view-1.js","js/game/game-view-2.js","js/game/game-view-3.js","js/star.js","js/data/stats-data.js","js/data/game-data.js","js/game/game.js","js/stats/stats-view.js","js/model.js","js/stats/stats.js","js/application.js","js/main.js"],"sourcesContent":["export const getElementFromTemplate = (template) => {\n  const container = document.createElement(`div`);\n  container.innerHTML = template;\n\n  return container;\n};\n\nexport const changeView = (view) => {\n  const main = document.querySelector(`.central`);\n\n  main.innerHTML = ``;\n  main.appendChild(view.element);\n};\n\nexport const debounce = {};\n\ndebounce.start = function (action, delayTime) {\n  clearTimeout(this.timer);\n\n  this.timer = setTimeout(() => {\n    action();\n  }, delayTime);\n};\n\nexport const imageLoader = (url) => {\n  return new Promise((resolve, reject) => {\n    let timeOut = null;\n    const img = new Image();\n\n    img.onload = function () {\n      clearTimeout(timeOut);\n\n      // Put natural size of loaded image into the object\n      const imageNaturalSizes = {\n        naturalWidth: img.naturalWidth,\n        naturalHeight: img.naturalHeight\n      };\n\n      resolve(imageNaturalSizes);\n    };\n\n    img.onerror = function () {\n      clearTimeout(timeOut);\n      reject();\n      throw new Error(`Downloading error!`);\n    };\n\n    timeOut = setTimeout(function () {\n      reject();\n      throw new Error(`Time out error!`);\n    }, 40000);\n\n    img.src = url;\n  });\n};\n","import {getElementFromTemplate} from \"./utilities\";\n\nexport default class AbstractView {\n  bind() {\n\n  }\n\n  render() {\n    return getElementFromTemplate(this.template);\n  }\n\n  get template() {\n    throw new Error(`You have to specify your template`);\n  }\n\n  get element() {\n    if (!this._element) {\n      this._element = this.render();\n      this.bind();\n    }\n    return this._element;\n  }\n}\n","import AbstractView from \"../view\";\n\nexport default class IntroView extends AbstractView {\n  get template() {\n    return `<div id=\"main\" class=\"central__content\">\n              <div id=\"intro\" class=\"intro\">\n                <h1 class=\"intro__asterisk\">*</h1>\n                <p class=\"intro__motto\"><sup>*</sup> Это не фото. Это рисунок маслом нидерландского художника-фотореалиста Tjalf Sparnaay.</p>\n              </div>\n            </div>`;\n  }\n\n  bind() {\n    const starBtn = this._element.querySelector(`.intro__asterisk`);\n\n    const onStarBtnClickHandler = (e) => {\n      if (e.target.closest(`.intro__asterisk`)) {\n        this.onStart();\n      }\n    };\n\n    starBtn.addEventListener(`click`, onStarBtnClickHandler);\n  }\n\n  onStart() {\n\n  }\n}\n","import IntroView from \"./intro-view\";\nimport {changeView} from \"../utilities\";\nimport app from \"../application\";\n\n\nexport default class IntroPresenter {\n  constructor() {\n    this.view = new IntroView();\n  }\n\n  init() {\n    changeView(this.view);\n    this.view.onStart = function () {\n      app.showGreeting();\n    };\n  }\n}\n","import AbstractView from \"../view\";\n\nexport default class GreetingView extends AbstractView {\n  get template() {\n    return `<div class=\"greeting central--blur\">\n              <div class=\"greeting__logo\">\n                <img src=\"img/logo_big.png\" width=\"201\" height=\"89\" alt=\"Pixel Hunter\">\n              </div>\n              <h1 class=\"greeting__asterisk\">*</h1>\n              <div class=\"greeting__challenge\">\n                <h3>Лучшие художники-фотореалисты бросают&nbsp;тебе&nbsp;вызов!</h3>\n                <p>Правила игры просты.<br>\n                  Нужно отличить рисунок&nbsp;от фотографии и сделать выбор.<br>\n                  Задача кажется тривиальной, но не думай, что все так просто.<br>\n                  Фотореализм обманчив и коварен.<br>\n                  Помни, главное — смотреть очень внимательно.</p>\n              </div>\n              <div class=\"greeting__continue\"><span><img src=\"img/arrow_right.svg\" width=\"64\" height=\"64\" alt=\"Next\"></span></div>\n            </div>`;\n  }\n\n  bind() {\n    const nextBtn = this._element.querySelector(`.greeting__continue`);\n\n    const onNextBtnClickHandler = (e) => {\n      if (e.target.closest(`.greeting__continue`)) {\n        this.nextScreen();\n      }\n    };\n\n    nextBtn.addEventListener(`click`, onNextBtnClickHandler);\n  }\n\n  nextScreen() {\n\n  }\n}\n","import GreetingView from \"./greeting-view\";\nimport {changeView} from \"../utilities\";\nimport app from \"../application\";\n\nexport default class GreetingPresentor {\n  constructor() {\n    this.view = new GreetingView();\n  }\n\n  init() {\n    changeView(this.view);\n\n    this.view.nextScreen = function () {\n      app.showRules();\n    };\n  }\n}\n","const headerTemplate = (extraTemplate) => {\n  const extraHeader = extraTemplate ? extraTemplate : ``;\n\n  const commonTemplate = `<header class=\"header\">\n    <div class=\"header__back\">\n      <button class=\"back\">\n        <img src=\"img/arrow_left.svg\" width=\"45\" height=\"45\" alt=\"Back\">\n        <img src=\"img/logo_small.svg\" width=\"101\" height=\"44\">\n      </button>\n    </div>\n    ${extraHeader}\n  </header>`.trim();\n\n  return commonTemplate;\n};\n\nexport default headerTemplate;\n","import AbstractView from \"../view\";\nimport headerTemplate from \"../templates/header\";\nimport {debounce} from \"../utilities\";\n\nexport default class RulesView extends AbstractView {\n  get template() {\n    return `${headerTemplate()}\n            <div class=\"rules\">\n              <h1 class=\"rules__title\">Правила</h1>\n              <p class=\"rules__description\">Угадай 10 раз для каждого изображения фото <img\n                src=\"img/photo_icon.png\" width=\"16\" height=\"16\"> или рисунок <img\n                src=\"img/paint_icon.png\" width=\"16\" height=\"16\" alt=\"\">.<br>\n                Фотографиями или рисунками могут быть оба изображения.<br>\n                На каждую попытку отводится 30 секунд.<br>\n                Ошибиться можно не более 3 раз.<br>\n                <br>\n                Готовы?\n              </p>\n              <form class=\"rules__form\">\n                <input class=\"rules__input\" type=\"text\" placeholder=\"Ваше Имя\" \n                  value=\"${localStorage.getItem(`name`) || ``}\">\n                <button class=\"rules__button continue\" \n                  type=\"submit\" ${(localStorage.getItem(`name`)) ? `` : `disabled`}>\n                  Go!\n                </button>\n              </form>\n            </div>`;\n  }\n\n  bind() {\n    const form = this._element.querySelector(`.rules__form`);\n    const userNameInput = form.querySelector(`.rules__input`);\n    const submitBtn = form.querySelector(`.rules__button`);\n    const backElement = this._element.querySelector(`.header__back`);\n\n    const btnUpdate = () => {\n      submitBtn.disabled = !(userNameInput.value.length > 1);\n    };\n\n    userNameInput.addEventListener(`input`, () => {\n      debounce.start(btnUpdate, 500);\n    });\n\n    form.addEventListener(`submit`, () => {\n      const name = userNameInput.value;\n      this.onUserNameSubmit(name);\n    });\n\n    backElement.addEventListener(`click`, () => {\n      this.onBack();\n    });\n  }\n\n  onBack() {\n\n  }\n\n  onUserNameSubmit(name) {\n    return name;\n  }\n}\n","import RulesView from \"./rules-view\";\nimport {changeView} from \"../utilities\";\nimport app from \"../application\";\n\nexport default class RulesPresenter {\n  constructor() {\n    this.view = new RulesView();\n  }\n\n  init() {\n    changeView(this.view);\n    this.view.onUserNameSubmit = (name) => {\n      localStorage.setItem(`name`, name);\n      app.showGame(name);\n    };\n\n    this.view.onBack = function () {\n      app.showIntro();\n    };\n  }\n}\n","import AbstractView from \"../view\";\nimport headerTemplate from \"../templates/header\";\n\nconst drawHeader = (state) =>\n  `<h1 class=\"game__timer\">${state.time}</h1>\n  <div class=\"game__lives\">\n    ${new Array(3 - state.lives)\n      .fill(`<img src=\"img/heart__empty.svg\" class=\"game__heart\" alt=\"Life\" width=\"32\" height=\"32\">`)\n      .join(``)}\n    ${new Array(state.lives)\n      .fill(`<img src=\"img/heart__full.svg\" class=\"game__heart\" alt=\"Life\" width=\"32\" height=\"32\">`)\n      .join(``)}\n  </div>`;\n\nconst GameContentClass = {\n  \"tinder-like\": `game__content--wide`,\n  \"two-of-two\": ``,\n  \"one-of-three\": `game__content--triple`\n};\n\nexport const drawStats = (stats) =>\n  stats.map((el) => `<li class=\"stats__result stats__result--${el}\"></li>`).join(``);\n\nexport default class GameView extends AbstractView {\n  constructor(state, level) {\n    super();\n    this.state = state;\n    this.level = level;\n  }\n\n  get template() {\n    return `${this.gameHeaderTemplate}\n            <div class=\"game\">\n              <p class=\"game__task\">${this.level.question}</p>\n              <form class=\"${`game__content ${GameContentClass[this.level.type]}`.trim()}\">\n                ${this.contentTemplate}\n              </form>\n              <div class=\"stats\">\n                <ul class=\"stats\">\n                  ${this.statsTemplate}\n                </ul>\n              </div>\n            </div>`;\n  }\n\n  get contentTemplate() {\n    return this.level.answers.map((answer, numb) => {\n      const answerSizes = [answer.image.naturalWidth, answer.image.naturalHeight,\n        answer.image.width, answer.image.height];\n      // Gets proper image size properties depending on frame size\n      const imageSizeProps = this.getImageSizeProperties(...answerSizes);\n\n      return `<div class=\"game__option\">\n                <img src=\"${answer.image.url}\" width=${imageSizeProps.widthProp} height=${imageSizeProps.heightProp} alt=\"Option ${numb + 1}\">\n                <label class=\"game__answer game__answer--photo\">\n                    <input name=\"question${numb + 1}\" type=\"radio\" value=\"photo\">\n                    <span>Фото</span>\n                  </label>\n                  <label class=\"game__answer game__answer--paint\">\n                    <input name=\"question${numb + 1}\" type=\"radio\" value=\"painting\">\n                    <span>Рисунок</span>\n                  </label>\n              </div>`;\n    }).join(``);\n  }\n\n  get gameHeaderTemplate() {\n    return headerTemplate(drawHeader(this.state));\n  }\n\n  get statsTemplate() {\n    return drawStats(this.state.stats);\n  }\n\n  /**\n   * Gets natural size of image and size of frame and calculate\n   * proper css params for image width and height:\n   * @param {number} nWidth - natural image width\n   * @param {number} nHeight - natural image height\n   * @param {number} fWidth - frame width\n   * @param {number} fHeight - frame height\n   * @return {object} - suitable css width and height properties \n   */\n  getImageSizeProperties(nWidth, nHeight, fWidth, fHeight) {\n    const imageWHratio = nWidth / nHeight;\n    const frameWHration = fWidth / fHeight;\n\n    const isImageWider = imageWHratio > frameWHration;\n    const [widthProp, heightProp] = isImageWider ? [`100%`, `auto`] : [`auto`, `100%`];\n\n    return {\n      widthProp,\n      heightProp\n    };\n  }\n\n  bind() {\n    this.backElement = this._element.querySelector(`.header__back`);\n    this.timerElement = this._element.querySelector(`.game__timer`);\n\n    this.backElement.addEventListener(`click`, () => {\n      this.onBack();\n    });\n  }\n\n  onAnswer(answer) {\n    return answer;\n  }\n\n  onBack() {\n\n  }\n\n  updateTime(time) {\n    if (time === 0) {\n      this.onAnswer(false);\n    } else {\n      this.timerElement.textContent = time;\n    }\n  }\n}\n","// Game view for \"tinder-like\" type\n\nimport GameView from \"./game-view\";\n\nexport default class GameType2View extends GameView {\n  constructor(state, level) {\n    super(state, level);\n  }\n\n  bind() {\n    const content = this._element.querySelector(`.game__content`);\n\n    const onContentClickHandler = (e) => {\n      if (e.target.closest(`input[type=radio]`)) {\n        const givenValue = content.querySelector(`input[type=radio]:checked`).value;\n\n        this.onAnswer(this.isAnswerCorrect(givenValue));\n      }\n    };\n\n    content.addEventListener(`click`, onContentClickHandler);\n    super.bind();\n  }\n\n  isAnswerCorrect(value) {\n    return value === this.level.answers[0].type;\n  }\n}\n","// Game view for \"two-of-two\" type\n\nimport GameView from \"./game-view\";\n\nexport default class GameType1View extends GameView {\n  constructor(state, level) {\n    super(state, level);\n  }\n\n  bind() {\n    const content = this._element.querySelector(`.game__content`);\n    const amountOfOptions = this.level.answers.length;\n\n    const onContentClickHandler = (e) => {\n      if (e.target.closest(`input[type=radio]`)) {\n        const answers = content.querySelectorAll(`input[type=radio]:checked`);\n        const amountOfGivenAnswers = answers.length;\n\n        if (amountOfGivenAnswers === amountOfOptions) {\n          const givenValues = Array.from(answers).map((el) => el.value);\n          this.onAnswer(this.isAnswerCorrect(givenValues));\n        }\n      }\n    };\n\n    content.addEventListener(`click`, onContentClickHandler);\n    super.bind();\n  }\n\n  isAnswerCorrect(values) {\n    const wrongAnswer = this.level.answers.find((answer, numb) => {\n      return answer.type !== values[numb];\n    });\n\n    return (!wrongAnswer) ? true : false;\n  }\n}\n","// Game view for \"one-of-three\" type\n\nimport GameView from \"./game-view\";\n\nexport default class GameType1View extends GameView {\n  constructor(state, level) {\n    super(state, level);\n  }\n\n  get contentTemplate() {\n    return this.level.answers.map((answer, numb) => {\n      const answerSizes = [answer.image.naturalWidth, answer.image.naturalHeight,\n        answer.image.width, answer.image.height];\n      // Gets proper image size properties depending on frame size\n      const imageSizeProps = this.getImageSizeProperties(...answerSizes);\n\n      return `<div class=\"game__option\">\n                <img src=\"${answer.image.url}\" width=${imageSizeProps.widthProp} height=${imageSizeProps.heightProp} alt=\"Option ${numb + 1}\">\n              </div>`;\n    }).join(``);\n  }\n\n  bind() {\n    const content = this._element.querySelector(`.game__content`);\n\n    const onContentClickHandler = (e) => {\n      const selectedOpt = e.target.closest(`.game__option`);\n\n      if (selectedOpt) {\n        selectedOpt.classList.add(`game__option--selected`);\n        const url = selectedOpt.querySelector(`img`).src;\n        this.onAnswer(this.isAnswerCorrect(url));\n      }\n    };\n\n    content.addEventListener(`click`, onContentClickHandler);\n    super.bind();\n  }\n\n  isAnswerCorrect(url) {\n    const type = (~this.level.question.indexOf(`рисунок`)) ? `painting` : `photo`;\n    const correctAnswer = this.level.answers.find((answer) => {\n      return answer.image.url === url && answer.type === type;\n    });\n\n    return (correctAnswer) ? true : false;\n  }\n}\n","import AbstractView from \"./view\";\n\nexport class SpinningStar extends AbstractView {\n  get template() {\n    return `<div id=\"main\" class=\"central__content\">\n              <div class=\"rolling-star\">\n                <h1 class=\"rolling-star__asterisk\">*</h1>\n              </div>\n            </div>`;\n  }\n}\n","const ALIVE = `alive`;\nconst SLOW = `slow`;\nconst FAST = `fast`;\nconst CORRECT = `correct`;\nconst WRONG = `wrong`;\n\nexport const resultType = {\n  SLOW,\n  FAST,\n  CORRECT,\n  WRONG\n};\n\nconst bonuses = Object.freeze({\n  [FAST]: {\n    title: `Бонус за скорость`,\n    classTitle: FAST,\n    cost: 50\n  },\n  [ALIVE]: {\n    title: `Бонус за жизнь`,\n    classTitle: ALIVE,\n    cost: 50\n  },\n  [SLOW]: {\n    title: `Штраф за медлительность`,\n    classTitle: SLOW,\n    cost: -50\n  }\n});\n\nconst POINT_PER_ANSWER = 100;\n\nexport const getBonus = (bonusName, amount) => {\n  if (!amount) {\n    return null;\n  }\n\n  const bonus = bonuses[bonusName];\n\n  if (!bonus) {\n    throw new Error(`The bonus is undefined`);\n  } else {\n    return {\n      title: bonus.title,\n      classTitle: bonus.classTitle,\n      amount,\n      points: amount * bonus.cost\n    };\n  }\n};\n\n/**\n * Builds the object that contains scores and bonuses informatin.\n * @param {array} stats - list of user's result\n * @param {number} lives - amount of lives that left in the end\n * @return {obj}\n */\nexport const getTableData = (stats, lives) => {\n  // Each right answer gives some point\n  const totalResult = stats.filter((el) => el !== `wrong`).length * POINT_PER_ANSWER;\n\n  /**\n   * Builds objects that contains \"name of bonus\": bonus amount, then\n   * replace this object with array of objects. Each object in that array\n   * represents iformation about bonus.\n   @return {object} for detailed information look at getBonus function return.\n   */\n  const tableBonuses = (function () {\n    let bonusMap = {\n      [FAST]: stats.filter((el) => el === FAST).length,\n      [SLOW]: stats.filter((el) => el === SLOW).length,\n      [ALIVE]: lives,\n    };\n\n    return Object.entries(bonusMap).map((pair) => {\n      return getBonus(pair[0], pair[1]); // pair[0] - bonus name, pair[1] - bonus amount\n    }).filter((el) => el !== null);\n  }());\n\n  // Accumulate all bonuses points and points that were given for each answer\n  const totalFinal = tableBonuses\n      .reduce((accum, bonus) => {\n        return accum + bonus.points;\n      }, totalResult);\n\n  return {\n    totalResult,\n    tableBonuses,\n    totalFinal\n  };\n};\n","import {resultType} from \"../data/stats-data\";\n\nexport const tick = (state) => {\n  const currentState = Object.assign({}, state);\n  currentState.time += -1;\n\n  return currentState;\n};\n\nconst INITIAL_LEVEL = 1;\nconst MAX_TIME = 30;\nconst MAX_LIVES = 3;\nconst INITIAL_STATS = new Array(10).fill(`unknown`);\n\nexport const initialState = Object.freeze({\n  gameNumb: INITIAL_LEVEL,\n  time: MAX_TIME,\n  lives: MAX_LIVES,\n  stats: INITIAL_STATS\n});\n\n/**\n * Defines user result depending on his performance.\n * @param {number} answerTime - The time that the user spent giving an answer.\n * @param {boolean} answerCorrect - Was the answer correct or not.\n * @return {string} - result.\n */\n\nexport const getResult = (answerTime, answerCorrect) => {\n  let result;\n\n  if (answerCorrect) {\n    if (answerTime <= 10) {\n      result = resultType.FAST;\n    } else if (answerTime <= 20) {\n      result = resultType.CORRECT;\n    } else if (answerTime > 20) {\n      result = resultType.SLOW;\n    }\n  } else {\n    result = resultType.WRONG;\n  }\n\n  return result;\n};\n\nexport const incLevel = (state) => {\n  state.gameNumb += 1;\n};\n\nconst decLives = (state) => {\n  if (state.lives === 0) {\n    return;\n  }\n  state.lives += -1;\n};\n\n/**\n * Gets state, makes copy and sets result of the game in the copy.\n * @param {obj} state - Initial state or state of previous game.\n * @param {string} levelResult - Word, describing user performance\n * @return {obj} - new state.\n */\n\nexport const setResult = (state, levelResult) => {\n  const currentState = Object.assign({}, state, {\n    stats: state.stats.slice(),\n    time: initialState.time\n  });\n\n  currentState.stats[state.gameNumb - 1] = levelResult;\n\n  if (levelResult === `wrong`) {\n    decLives(currentState);\n  }\n\n  if (currentState.gameNumb < currentState.stats.length) {\n    incLevel(currentState);\n  }\n\n  return currentState;\n};\n","import GameType1View from \"./game-view-1\";\nimport GameType2View from \"./game-view-2\";\nimport GameType3View from \"./game-view-3\";\nimport {SpinningStar} from \"../star.js\";\nimport {changeView, imageLoader} from \"../utilities\";\nimport {initialState, getResult, setResult, tick} from \"../data/game-data\";\nimport app from \"../application\";\n\nconst GameView = {\n  \"tinder-like\": GameType1View,\n  \"two-of-two\": GameType2View,\n  \"one-of-three\": GameType3View\n};\n\nexport default class GamePresenter {\n  constructor(levels, userName) {\n    this.userName = userName;\n    this.levels = levels;\n    this.state = initialState;\n    this.initialTime = this.state.time;\n    this.view = new GameView[this.level.type](this.state, this.level);\n    this.loadingScreen = new SpinningStar();\n  }\n\n  get level() {\n    return this.levels[this.state.gameNumb - 1];\n  }\n\n  /**\n   * It's important to remember that this method\n   * creates a lot of closures inside. Timer recursively\n   * recreates itself calling method this.view.updateTime\n   * each tick. If we want to stop the game, just changing\n   * the view is not enough, becouse it wont stop the timer.\n   * Once time is over this.view.updateTime will execute\n   * this.view.OnAnswer that returns game process.\n   */\n  startTimer() {\n    const action = () => {\n      this.state = tick(this.state);\n      this.view.updateTime(this.state.time);\n      this.timer = setTimeout(action, 1000);\n    };\n    this.timer = setTimeout(action, 1000);\n  }\n\n  stopTimer() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n  }\n\n  imagePreLoader() {\n    const loadingPromises = [];\n\n    // Preloads pictures from current level\n    this.level.answers.map((answer) => {\n      const loader = imageLoader(answer.image.url).\n          /**\n           * In case of success, write down natural sizes of loaded image\n           * into properties of level.answer.image object\n           */\n          then((imageNaturalSizes) => {\n            answer.image.naturalHeight = imageNaturalSizes.naturalHeight;\n            answer.image.naturalWidth = imageNaturalSizes.naturalWidth;\n          }, () => {\n            // In case of  error shows intro screen\n            this.view.onBack();\n          });\n      // Accumulates all pictures loadings in the array\n      loadingPromises.push(loader);\n    });\n\n    return Promise.all(loadingPromises);\n  }\n\n  init() {\n    changeView(this.loadingScreen);\n    this.imagePreLoader().then(() => {\n      // Show current game screen and then start the timer\n      changeView(this.view);\n      this.startTimer();\n    });\n\n    // While downloading pictures overrides view methods\n\n    /**\n     * Gets answer and considers next step depending on current state.\n     * @param {boolean} answer - answer given by user\n     * @return {void}\n     */\n    this.view.onAnswer = (answer) => {\n      this.stopTimer();\n      const answerDuration = this.initialTime - this.state.time;\n      const isAnswCorrect = answer;\n      const result = getResult(answerDuration, isAnswCorrect);\n\n      // if it's last level, show statistics screen\n      if (this.state.gameNumb === this.state.stats.length) {\n        changeView(this.loadingScreen);\n        this.state = setResult(this.state, result);\n\n        const statsObj = {\n          stats: this.state.stats,\n          lives: this.state.lives\n        };\n        app.showStats(this.userName, statsObj);\n        // if level is not last, make a new view depending on level type and execute init method recursively\n      } else {\n        this.state = setResult(this.state, result);\n        const nextLevel = this.level;\n        this.view = new GameView[nextLevel.type](this.state, nextLevel);\n        this.init();\n      }\n    };\n\n    this.view.onBack = () => {\n      this.stopTimer();\n      app.restart();\n    };\n  }\n}\n","import AbstractView from \"../view\";\nimport {getTableData} from \"../data/stats-data\";\nimport {drawStats} from \"../game/game-view\";\nimport headerTemplate from \"../templates/header\";\n\nexport default class StatsrView extends AbstractView {\n  constructor(resultTable) {\n    super();\n    this.resultTable = resultTable.reverse();\n  }\n\n  makeStatsTemplate(stats) {\n    return `<ul class=\"stats\">\n              ${drawStats(stats)}\n            </ul>`;\n  }\n\n  get template() {\n    let currentGameTitle;\n    const resultsTemplate = this.resultTable.map((resultObj, numb) => {\n      const isWin = resultObj.lives > 0;\n\n      if (numb === 0 && isWin) {\n        currentGameTitle = true;\n      }\n\n      let resultContent;\n\n      if (isWin) {\n        const {totalResult, tableBonuses, totalFinal} = getTableData(resultObj.stats, resultObj.lives);\n        resultContent =\n          `<table class=\"result__table\">\n            <tr>\n              <td class=\"result__number\">${numb + 1}.</td>\n              <td colspan=\"2\">${this.makeStatsTemplate(resultObj.stats)}</td>\n              <td class=\"result__points\">×&nbsp;100</td>\n              <td class=\"result__total\">${totalResult}</td>\n            </tr>\n            ${tableBonuses.map((bonus) =>\n            `<tr>\n              <td></td>\n              <td class=\"result__extra\">${bonus.title}:</td>\n              <td class=\"result__extra\">${bonus.amount}&nbsp;<span class=\"stats__result stats__result--${bonus.classTitle}\"></span></td>\n              <td class=\"result__points\">×&nbsp;50</td>\n              <td class=\"result__total\">${bonus.points}</td>\n            </tr>`).join(``).trim()}\n            <tr>\n              <td colspan=\"5\" class=\"result__total  result__total--final\">${totalFinal}</td>\n            </tr>\n          </table>\\n`;\n      } else {\n        resultContent =\n          `<table class=\"result__table\">\n            <tr>\n              <td class=\"result__number\">${numb + 1}.</td>\n              <td></td>\n              <td class=\"result__total\">${this.makeStatsTemplate(resultObj.stats)}</td>\n              <td class=\"result__total  result__total--final\">fail</td>\n            </tr>\n          </table>\\n`;\n      }\n\n      return resultContent;\n    }).join(``).trim();\n\n    return `${headerTemplate()}\n            <div class=\"result\">\n              ${currentGameTitle ? `<h1>Победа!</h1>\\n` : ``}\n              ${resultsTemplate}\n            </div>\\n`.trim();\n  }\n\n  bind() {\n    const backElement = this._element.querySelector(`.header__back`);\n\n    backElement.addEventListener(`click`, () => {\n      this.onBack();\n    });\n  }\n\n  onBack() {\n\n  }\n}\n","export default class Model {\n  get urlRead() {\n    throw new Error(`Abstract method. You need to define method first`);\n  }\n\n  get urlWrite() {\n    throw new Error(`Abstract method. You need to define method first`);\n  }\n\n  load() {\n    return fetch(this.urlRead)\n        .then((resp) => resp.json());\n  }\n\n  send(data) {\n    const requestSettings = {\n      method: `POST`,\n      headers: {\n        \"Content-Type\": `application/json`\n      },\n      body: JSON.stringify(data)\n    };\n\n    return fetch(this.urlWrite, requestSettings);\n  }\n}\n","import StatsView from \"./stats-view\";\nimport app from \"../application\";\nimport Model from \"../model\";\nimport {changeView} from \"../utilities\";\n\nexport default class StatsPresenter {\n  constructor(userResult, userName) {\n    this.userResult = userResult;\n    this.model = new class extends Model {\n      get urlRead() {\n        return `https://intensive-ecmascript-server-btfgudlkpi.now.sh/pixel-hunter/stats/${userName}`;\n      }\n\n      get urlWrite() {\n        return `https://intensive-ecmascript-server-btfgudlkpi.now.sh/pixel-hunter/stats/${userName}`;\n      }\n    }();\n  }\n\n  showUserResultTable() {\n    this.model.load()\n        .then((resultTable) => {\n          this.view = new StatsView(resultTable);\n\n          this.view.onBack = () => {\n            app.restart();\n          };\n        })\n        .then(() => changeView(this.view))\n        .catch(window.console.error);\n  }\n\n  init() {\n    if (this.userResult) {\n      this.model.send(this.userResult)\n          .then(() => this.showUserResultTable());\n    } else {\n\n      this.showUserResultTable();\n    }\n  }\n}\n","import Intro from \"./intro/intro\";\nimport Greeting from './greeting/greeting';\nimport Rules from './rules/rules';\nimport Game from './game/game';\nimport Stats from './stats/stats';\nimport Model from \"./model\";\nimport {SpinningStar} from \"./star\";\nimport {changeView} from \"./utilities\";\n\nconst ControllerID = {\n  INTRO: ``,\n  GREETING: `greeting`,\n  RULES: `rules`,\n  GAME: `game`,\n  STATS: `stats`\n};\n\nconst getControllerVariablesFromHash = (hash) => {\n  return hash ? hash.replace(`#`, ``).split(`?`) : [``];\n};\n\nclass Application {\n  constructor() {\n    this.preloadingScreen = new SpinningStar();\n    this.userName = `Guest`;\n    this.model = new class extends Model {\n      get urlRead() {\n        return `https://intensive-ecmascript-server-btfgudlkpi.now.sh/pixel-hunter/questions`;\n      }\n    }();\n  }\n\n  loadData() {\n    changeView(this.preloadingScreen);\n    return new Promise((resolve) => {\n      this.model.load()\n          .then((data) => {\n            this.setup();\n            this.gameData = data;\n            resolve();\n          })\n          .catch(window.console.error);\n    });\n  }\n\n  restart() {\n    this.loadData()\n        .then(() => {\n          this.showIntro();\n        });\n  }\n\n  changeController(route = ``, ...variables) {\n    let controller;\n    let userName;\n\n    switch (route) {\n      case ControllerID.GAME:\n        [userName] = variables;\n        controller = new this.routes[route](this.gameData, userName);\n        break;\n      case ControllerID.STATS:\n        [userName] = variables;\n        controller = new this.routes[route](this.userResult, userName);\n        break;\n\n      default:\n        controller = new this.routes[route]();\n        break;\n    }\n\n    controller.init();\n  }\n\n  setup() {\n    this.routes = {\n      [ControllerID.INTRO]: Intro,\n      [ControllerID.GREETING]: Greeting,\n      [ControllerID.RULES]: Rules,\n      [ControllerID.GAME]: Game,\n      [ControllerID.STATS]: Stats\n    };\n  }\n\n  init() {\n    window.onhashchange = () => {\n      this.changeController(...getControllerVariablesFromHash(location.hash));\n    };\n\n    this.loadData()\n        .then(() => this.changeController(...getControllerVariablesFromHash(location.hash)));\n  }\n\n  showIntro() {\n    location.hash = ControllerID.INTRO;\n  }\n\n  showGreeting() {\n    location.hash = ControllerID.GREETING;\n  }\n\n  showRules() {\n    location.hash = ControllerID.RULES;\n  }\n\n  showGame(userName) {\n    location.hash = `${ControllerID.GAME}?${userName}`;\n  }\n\n  showStats(userName, userResult) {\n    this.userResult = userResult;\n    location.hash = `${ControllerID.STATS}?${userName}`;\n  }\n}\n\nconst app = new Application();\nexport default app;\n","import app from \"./application\";\n\nwindow.addEventListener(`load`, () => {\n  app.init();\n});\n"],"names":["GameView","GameType1View","GameType2View","GameType3View","StatsView","Intro","Greeting","Rules","Game","Stats"],"mappings":"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"}